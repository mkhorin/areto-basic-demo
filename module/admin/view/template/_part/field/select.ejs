<!-- _part/field/select -->

<% let params = {
    itemValueKey: typeof itemValueKey === 'undefined' ? model.PK : itemValueKey,
    itemLabelKey: typeof itemLabelKey === 'undefined' ? 'name' : itemLabelKey
}; %>
<%- include('_set-params', {params}) %>

<div class="form-group<%- params.required %> <%- params.error ? 'has-error' : '' %>">
    <label for="<%- params.id %>" class="col-sm-2 control-label">
        <%- params.label %>
    </label>
    <div class="col-sm-10">
        <select id="<%- params.id %>" name="<%- params.name %>" class="form-control">
        <% if (typeof empty !== 'undefined') { %>
            <option value=""><%- empty %></option>
        <% } %>
        <% for (let item of items) { %>
            <option value="<%- item[params.itemValueKey] %>"
                    <%- item[params.itemValueKey].toString() == params.value ? 'selected' : '' %>>
                <%= item[params.itemLabelKey] %>
            </option>
        <% } %>
        </select>
        <div class="hint-block"><%- params.error %></div>
    </div>
</div>