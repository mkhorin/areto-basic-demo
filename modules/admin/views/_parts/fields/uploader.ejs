<!-- _parts/fields/uploader -->
<%
    let _id = typeof id === 'undefined' ? model.getFormAttributeId(attr) : id;
    let _name = typeof name === 'undefined' ?  model.getFormAttributeName(attr) : name;
    let _label = typeof label === 'undefined' ? model.getLabel(attr) : label;
    let _required = model.isAttributeRequired(attr) ? ' required' : '';
    let _error = t(model.getFirstError(attr));
    let _options = typeof options === 'undefined' ? {} : options;
    let _files = typeof files === 'undefined' ? null : files;

    if (_files instanceof Array) {
        _options.items = [];
        for (let file of _files) {
            _options.items.push({
                id: file.getId(),
                name: file.get('originalName'),
                size: file.get('size')
            });
        }
    }
%>
<div class="form-group<%- _required %> <%- _error ? 'has-error' : '' %>">
    <label for="<%- _id %>" class="col-sm-2 control-label"><%- _label %></label>
    <div class="col-sm-10">
        <input type="hidden" id="<%- _id %>" name="<%- _name %>">
        <div class="uploader" data-id="#<%- _id %>"
             data-url="<%- controller.createUrl(url) %>"
             data-options="<%= JSON.stringify(_options)%>">
            <div class="uploader-input">
                <input type="file" class="uploader-input-file">
                <div class="uploader-dropzone">
                    <div class="uploader-dropzone-h1">Drag and drop or select files here</div>
                </div>
            </div>
            <div class="uploader-overflow">Too many</div>
            <div class="uploader-list clearfix">
                <div class="uploader-item pending sample">
                    <div class="uploader-thumb"></div>
                    <div class="uploader-signs">
                        <div class="uploader-sign-pending glyphicon glyphicon-refresh spinning"></div>
                        <div class="uploader-sign-processing glyphicon glyphicon-refresh spinning"></div>
                        <div class="uploader-sign-done glyphicon glyphicon-ok"></div>
                        <div class="uploader-sign-failed glyphicon glyphicon-ban-circle"></div>
                    </div>
                    <div class="uploader-remove" title="Delete"><span class="glyphicon glyphicon-remove"></span></div>
                    <div class="uploader-info">
                        <div class="uploader-filename">File</div>
                        <div class="progress progress-xxs"><div class="progress-bar"></div></div>
                        <div class="uploader-message">Preparing to upload...</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hint-block"><%- _error %></div>
    </div>
</div>