<% layout(view.get('_layouts/content')) -%>

<% if (model.hasError()) { %>
<div class="row">
    <div class="col-sm-10 col-sm-offset-2">
        <div class="alert alert-danger">
            <% for (let attr in model.getErrors()) { %>
            <p><b><%- model.getLabel(attr) %>:</b> <%- t(model.getFirstError(attr))%> </p>
            <% } %>
        </div>
    </div>
</div>
<% } else if (controller.isPost()) { %>
<div class="row">
    <div class="col-sm-10 col-sm-offset-2">
        <div class="alert alert-success">The object is stored</div>
    </div>
</div>
<% } %>

<form action="<%= controller.req.originalUrl %>" method="post" class="form-horizontal form" autocomplete="off">

    <input type="hidden" name="referrer" value="<%= controller.getRefUrl() %>">

    <div class="object-controls">
        <button class="btn btn-primary" type="submit">Save</button>

        <% if(!model.isNewRecord) { %>

        <a href="<%- u(['view', model]) %>" class="btn btn-success">View</a>

        <button class="btn btn-danger action-submit" type="button"
                data-url="<%- u(['delete', model]) %>"
                data-confirm="Remove this object?">
            Delete
        </button>
        <% } %>
    </div>

    <%- body -%>

</form>