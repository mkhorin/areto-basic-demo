<% layout(_view.get('_layouts/view')) -%>

<% block('title', 'Article') -%>

<% _view.setData('breadcrumbs', [
    {title: 'Articles', url: '/admin/article'},
    {title: model.getId()}
]) %>

<% let stat = _view.get('_parts/fields/static'); %>

<%- partial(stat, {
    attr: 'title'
}) %>

<%- partial(stat, {
    attr: 'date',
    value: _format(model.get('date'), 'date')
}) %>

<%- partial(stat, {
    attr: 'status'
}) %>

<%- partial(stat, {
    attr: 'author',
    value: model.get('author.name'),
    escaping: false
}) %>

<%- partial(stat, {
    attr: 'updatedAt',
    value: _format(model.get('updatedAt'), 'datetime')
}) %>

<%- partial(stat, {
    attr: 'createdAt',
    value: _format(model.get('createdAt'), 'datetime')
}) %>

<%- partial(_view.get('_parts/fields/relation'), {
    attr: 'tags',
    viewRoute: 'tag/view'
}) %>

<%- partial(stat, {
    attr: 'content',
    escaping: false
}) %>

<%- partial(_view.get('_parts/fields/relation'), {
    attr: 'mainPhoto',
    itemTemplate: _view.get('article/thumb-item'),
    viewRoute: 'photo/view'
}) %>

<%- partial(_view.get('_parts/fields/relation'), {
    attr: 'photos',
    itemTemplate: _view.get('article/thumb-item'),
    viewRoute: 'photo/view'
}) %>

<%- partial(_view.get('_parts/fields/list'), {
    attr: 'comments',
    provider: comments,
    itemTemplate: 'article/comment-item',
    create: _url(['comment/create', model]),
    search: null,
    routePrefix: 'comment/'
}) %>